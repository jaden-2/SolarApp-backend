<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
  <meta charset="UTF-8"/>
  <title>System Report #[[${report.reportId}]]</title>
  <style>
    body {
      font-family: "Segoe UI", sans-serif;
      margin: 40px;
      color: #333;
    }
    h1, h2 {
      color: #204060;
    }
    .section {
      margin-bottom: 30px;
    }
    .section h2{
      border-bottom: 2px solid #204060;
      padding-bottom: 4px;
      margin-bottom: 10px;
    }
    .section p{
      border-bottom: 2px solid #204060;
      padding-bottom: 4px;
      margin-bottom: 10px;
      font-size: 10pt;
      
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }
    table {
      border-collapse: collapse;
      width: 100%;
      margin-top: 10px;

    }
    table, th, td {
      border: 1px solid #aaa;
    }
    th, td {
      padding: 8px 12px;
      text-align: left;
    }
    td {
      word-wrap: break-word;
      word-break: break-word;
    }

    th {
      background-color: #f0f4f8;
    }


    .grid-2 {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
    }
    .footer {
      margin-top: 40px;
      font-size: 12px;
      color: #888;
      border-top: 1px solid #ccc;
      padding-top: 10px;
      text-align: center;
    }
    .footer .footer-icons {
      margin-top: 4px;
      text-align: center;
    }
    .footer .footer-icons a {
      display: inline-block;
      margin: 0 5px;
      vertical-align: middle;
    }
    .footer .footer-icons img {
      width: 40px;
      height: auto;
      vertical-align: middle;
    }
  </style>
</head>
<body>
  <h1>Report Title: #[[${report.title}]]</h1>
  <h3>System Report #[[${report.reportId}]]</h3>
  <p><strong>Date Created: [[${createdAt}]]  </strong> </p>
  <!-- Battery Bank -->
  <div class="section">
    <h2>Battery Bank</h2>
    <p>The battery bank stores the energy generated by your solar panels, ensuring power is available even when the sun isn't shining.</p>
    <div class="grid-2">
      <table>
        <tr><th>Brand</th><td>[[${report.batteryBank.brand}]]</td></tr>
        <tr><th>Type</th><td>[[${report.batteryBank.batteryType}]]</td></tr>
        <tr><th>Voltage</th><td>[[${report.batteryBank.batteryVoltage}]] V</td></tr>
        <tr><th>Current Capacity</th><td>[[${report.batteryBank.batteryCurrentCapacityAh}]] Ah</td></tr>
        <tr><th>Energy Capacity</th><td>[[${report.batteryBank.batteryEnergyCapacityAh}]] kWh</td></tr>
        <tr><th>Required Capacity</th><td>[[${report.batteryBank.requiredBankCapacityAh}]] Ah</td></tr>
      </table>
      <table>
        <tr><th>Series</th><td>[[${report.batteryBank.configuration.series}]]</td></tr>
        <tr><th>Parallel</th><td>[[${report.batteryBank.configuration.parallel}]]</td></tr>
        <tr><th>Total Batteries</th><td>[[${report.batteryBank.configuration.series * report.batteryBank.configuration.parallel}]]</td></tr>
      </table>
    </div>
  </div>

  <!-- Solar Array -->
  <div class="section">
    <h2>Solar Array</h2>
    <p>The solar array is the cornerstone of your system...</p>
    <table>
      <tr><th>Brand</th><td>[[${report.solarArray.brand}]]</td></tr>
      <tr><th>Model</th><td>[[${report.solarArray.model}]]</td></tr>
      <tr><th>Panel Type</th><td>[[${report.solarArray.electricalProperties.type}]]</td></tr>
      <tr><th>Capacity</th><td>[[${report.solarArray.electricalProperties.power_w}]] W</td></tr>
      <tr><th>Total Array Capacity</th><td>[[${report.solarArray.calculatePanelCapacity}]] W</td></tr>
      <tr>
        <th>Configuration</th>
        <td>[[${report.solarArray.configuration.series}]] series × [[${report.solarArray.configuration.parallel}]] parallel = [[${report.solarArray.configuration.series * report.solarArray.configuration.parallel}]] panels</td>
      </tr>
    </table>

    <h3>Mechanical Properties</h3>
    <table>
      <tr><th>Length</th><td>[[${report.solarArray.mechanicalProperties.length_m}]] m</td></tr>
      <tr><th>Width</th><td>[[${report.solarArray.mechanicalProperties.width_m}]] m</td></tr>
    </table>

    <h3>Electrical Properties</h3>
    <table>
      <tr><th>Vmax</th><td>[[${report.solarArray.electricalProperties.Vmax}]] V</td></tr>
      <tr><th>Imp</th><td>[[${report.solarArray.electricalProperties.Imp}]] A</td></tr>
      <tr><th>Isc</th><td>[[${report.solarArray.electricalProperties.Isc}]] A</td></tr>
      <tr><th>Voc</th><td>[[${report.solarArray.electricalProperties.Voc}]] V</td></tr>
    </table>
  </div>

  <!-- Inverter -->
  <div class="section">
    <h2>Inverter</h2>
    <table>
      <tr><th>Name</th><td>[[${report.inverter.name}]]</td></tr>
      <tr><th>Model</th><td>[[${report.inverter.model}]]</td></tr>
      <tr><th>Type</th><td>[[${report.inverter.type}]]</td></tr>
      <tr><th>Rated Capacity</th><td>[[${report.inverter.capacityKva}]] kVA</td></tr>
      <tr><th>System Voltage</th><td>[[${report.inverter.systemVoltage}]] V</td></tr>
      <tr><th>Effective Capacity</th><td>[[${report.inverter.calculatedInverterCapacityKva}]] kVA</td></tr>
      <tr>
        <th>Configuration</th>
        <td>[[${report.inverter.configuration.series}]] × [[${report.inverter.configuration.parallel}]] = [[${report.inverter.configuration.series * report.inverter.configuration.parallel}]] unit</td>
      </tr>
    </table>
  </div>

  <!-- Charge Controller -->
  <div class="section">
    <h2>Charge Controller</h2>
    <table>
      <tr><th>Brand</th><td>[[${report.chargeController.brand}]]</td></tr>
      <tr><th>Model</th><td>[[${report.chargeController.model}]]</td></tr>
      <tr><th>Type</th><td>[[${report.chargeController.type}]]</td></tr>
      <tr><th>Charge Current</th><td>[[${report.chargeController.maximumChargeCurrent}]] A</td></tr>
      <tr>
        <th>Voltage Range</th>
        <td>[[${report.chargeController.minimumVolts}]] V - [[${report.chargeController.maximumVolts}]] V</td>
      </tr>
      <tr><th>Calculated Capacity</th><td>[[${report.chargeController.calculatedCapacity}]] A</td></tr>
      <tr>
        <th>Configuration</th>
        <td>[[${report.chargeController.configuration.series}]] × [[${report.chargeController.configuration.parallel}]] = [[${report.chargeController.configuration.series * report.chargeController.configuration.parallel}]] unit</td>
      </tr>
    </table>
  </div>

  <!-- DC Breaker -->
  <div class="section">
    <h2>DC Breaker</h2>
    <table>
      <tr><th>Model</th><td>[[${report.dcBreaker.model}]]</td></tr>
      <tr><th>Type</th><td>[[${report.dcBreaker.type}]]</td></tr>
      <tr><th>Current</th><td>[[${report.dcBreaker.current}]] A</td></tr>
      <tr><th>Max Voltage</th><td>[[${report.dcBreaker.maximumVoltage}]] V</td></tr>
      <tr><th>Calculated Capacity</th><td>[[${report.dcBreaker.calculatedCapacity}]] A</td></tr>
    </table>
  </div>

  <!-- Wire Details -->
  <div class="section">
    <h2>Wire Recommendations</h2>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>SWG / Diameter</th>
          <th>Max Current</th>
          <th>Max Length (m)</th>
          <th>Power Loss </th>
          <th>Length Type</th>
          <th>Recommendation</th>
        </tr>
      </thead>
      <tbody>
        <tr th:each="wire : ${report.wireDetails}">
          <td th:text="${wire.type}">Type</td>
          <td th:text="${wire.wireSpecification.SWG} + ' / ' + ${wire.wireSpecification.diameter_mm} + ' mm'"></td>
          <td th:text="${wire.wireSpecification.maxCurrent} + ' A'"></td>
          <td th:text="${wire.maximumAllowedWireLength_m} + ' m'"></td>
          <td th:text="${wire.powerLoss}"></td>
          <td th:text="${wire.lengthType}"></td>
          <td th:text="${wire.recommendation}"></td>
        </tr>
      </tbody>
    </table>
    <div class="footer">
      <div style="margin-bottom:8px;">
        Report generated automatically by SolarReportSys © [[${year}]]
      </div>
      <div class="footer-icons">
        <a href="https://www.linkedin.com/in/sylvanus-jedidiah" target="_blank" rel="noopener noreferrer" aria-label="LinkedIn">
          <img alt="LinkedIn Logo" th:src="${linkedIn}"/>
        </a>
        <a href="https://github.com/jaden-2" target="_blank" rel="noopener noreferrer" aria-label="GitHub">
          <img alt="GitHub Logo" th:src="${github}"/>
        </a>
        <a href="mailto:jedidiahsylvanus@gmail.com" aria-label="Email">
          <img alt="Email" th:src="${gmail}"/>
        </a>
      </div>
    </div>
  </div>

</body>
</html>
